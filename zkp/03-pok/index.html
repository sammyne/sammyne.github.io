<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>[ZKP] 03. 寻找知识 | sammyne</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Just playing around :)">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.49bc6dee.css" as="style"><link rel="preload" href="/assets/js/app.6731dc6d.js" as="script"><link rel="preload" href="/assets/js/3.3f52b992.js" as="script"><link rel="preload" href="/assets/js/1.86295094.js" as="script"><link rel="preload" href="/assets/js/6.905f5193.js" as="script"><link rel="prefetch" href="/assets/js/10.1038f603.js"><link rel="prefetch" href="/assets/js/11.96eec3c9.js"><link rel="prefetch" href="/assets/js/12.d28f2fe1.js"><link rel="prefetch" href="/assets/js/13.42ab1ca0.js"><link rel="prefetch" href="/assets/js/14.051d7969.js"><link rel="prefetch" href="/assets/js/15.4ed924b6.js"><link rel="prefetch" href="/assets/js/16.2316213b.js"><link rel="prefetch" href="/assets/js/17.8a6b7ba1.js"><link rel="prefetch" href="/assets/js/18.79ea8cf4.js"><link rel="prefetch" href="/assets/js/19.3141bf59.js"><link rel="prefetch" href="/assets/js/20.deaa9f14.js"><link rel="prefetch" href="/assets/js/21.cbf78bb1.js"><link rel="prefetch" href="/assets/js/22.d6a5c657.js"><link rel="prefetch" href="/assets/js/23.f04a9f25.js"><link rel="prefetch" href="/assets/js/24.aa0b9a4f.js"><link rel="prefetch" href="/assets/js/25.e9b27a2a.js"><link rel="prefetch" href="/assets/js/26.6a774f88.js"><link rel="prefetch" href="/assets/js/27.ed0fc0f9.js"><link rel="prefetch" href="/assets/js/28.a397c3d7.js"><link rel="prefetch" href="/assets/js/29.bc4b043d.js"><link rel="prefetch" href="/assets/js/30.213d982d.js"><link rel="prefetch" href="/assets/js/31.017c6b4e.js"><link rel="prefetch" href="/assets/js/32.3c39cb85.js"><link rel="prefetch" href="/assets/js/33.2d74623b.js"><link rel="prefetch" href="/assets/js/34.79a608bc.js"><link rel="prefetch" href="/assets/js/35.908be713.js"><link rel="prefetch" href="/assets/js/36.9c2eb74c.js"><link rel="prefetch" href="/assets/js/37.e2cb8a6e.js"><link rel="prefetch" href="/assets/js/38.3fccd1be.js"><link rel="prefetch" href="/assets/js/39.edd23d2d.js"><link rel="prefetch" href="/assets/js/4.427febfc.js"><link rel="prefetch" href="/assets/js/40.188ea825.js"><link rel="prefetch" href="/assets/js/41.b1c0ffa7.js"><link rel="prefetch" href="/assets/js/42.91d363cd.js"><link rel="prefetch" href="/assets/js/43.aa239f52.js"><link rel="prefetch" href="/assets/js/44.2546e0e4.js"><link rel="prefetch" href="/assets/js/45.2dbb3db7.js"><link rel="prefetch" href="/assets/js/46.3064f272.js"><link rel="prefetch" href="/assets/js/47.6ab91381.js"><link rel="prefetch" href="/assets/js/48.f58019a7.js"><link rel="prefetch" href="/assets/js/49.d9d77fae.js"><link rel="prefetch" href="/assets/js/5.3ab3e749.js"><link rel="prefetch" href="/assets/js/50.cb88fead.js"><link rel="prefetch" href="/assets/js/51.5f5eee7e.js"><link rel="prefetch" href="/assets/js/52.ae4e6334.js"><link rel="prefetch" href="/assets/js/53.17db3a12.js"><link rel="prefetch" href="/assets/js/54.a44acc29.js"><link rel="prefetch" href="/assets/js/55.aeaaad9e.js"><link rel="prefetch" href="/assets/js/56.b42ebcb9.js"><link rel="prefetch" href="/assets/js/57.b9fc672e.js"><link rel="prefetch" href="/assets/js/58.aa6443bc.js"><link rel="prefetch" href="/assets/js/59.3a8b21f1.js"><link rel="prefetch" href="/assets/js/60.7e1e0d62.js"><link rel="prefetch" href="/assets/js/61.2d82fc74.js"><link rel="prefetch" href="/assets/js/62.e5817de7.js"><link rel="prefetch" href="/assets/js/63.9c45d434.js"><link rel="prefetch" href="/assets/js/64.7869c4d8.js"><link rel="prefetch" href="/assets/js/65.47ff3714.js"><link rel="prefetch" href="/assets/js/66.83077b8c.js"><link rel="prefetch" href="/assets/js/67.fa18d1cd.js"><link rel="prefetch" href="/assets/js/68.debb8be6.js"><link rel="prefetch" href="/assets/js/69.1d7114ab.js"><link rel="prefetch" href="/assets/js/7.7171cbe2.js"><link rel="prefetch" href="/assets/js/70.9b795da4.js"><link rel="prefetch" href="/assets/js/71.2a904461.js"><link rel="prefetch" href="/assets/js/72.fb1ddcda.js"><link rel="prefetch" href="/assets/js/73.00835c21.js"><link rel="prefetch" href="/assets/js/74.c6fd062a.js"><link rel="prefetch" href="/assets/js/75.9a67ecba.js"><link rel="prefetch" href="/assets/js/76.160be0b9.js"><link rel="prefetch" href="/assets/js/77.eca56bef.js"><link rel="prefetch" href="/assets/js/78.5198658f.js"><link rel="prefetch" href="/assets/js/79.0055d088.js"><link rel="prefetch" href="/assets/js/8.0b3d33ad.js"><link rel="prefetch" href="/assets/js/80.2804a168.js"><link rel="prefetch" href="/assets/js/81.0c6113a4.js"><link rel="prefetch" href="/assets/js/82.2480233f.js"><link rel="prefetch" href="/assets/js/83.d4e662be.js"><link rel="prefetch" href="/assets/js/84.806f671f.js"><link rel="prefetch" href="/assets/js/85.eab149d6.js"><link rel="prefetch" href="/assets/js/86.53eaef8b.js"><link rel="prefetch" href="/assets/js/87.939a3a36.js"><link rel="prefetch" href="/assets/js/88.1d9db98a.js"><link rel="prefetch" href="/assets/js/89.e73f74c7.js"><link rel="prefetch" href="/assets/js/9.4fb731d8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.49bc6dee.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>sammyne</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>Just playing around :)</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>sammyne</span>
            
          <span data-v-4e82dffc>2020 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="sammyne" class="logo"> <span class="site-name">sammyne</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/dev/" class="nav-link"><i class="undefined"></i>
  dev
</a></li><li class="dropdown-item"><!----> <a href="/categories/crypto/" class="nav-link"><i class="undefined"></i>
  crypto
</a></li><li class="dropdown-item"><!----> <a href="/categories/programming/" class="nav-link"><i class="undefined"></i>
  programming
</a></li><li class="dropdown-item"><!----> <a href="/categories/tee/" class="nav-link"><i class="undefined"></i>
  tee
</a></li><li class="dropdown-item"><!----> <a href="/categories/os/" class="nav-link"><i class="undefined"></i>
  os
</a></li><li class="dropdown-item"><!----> <a href="/categories/engineering/" class="nav-link"><i class="undefined"></i>
  engineering
</a></li><li class="dropdown-item"><!----> <a href="/categories/tool/" class="nav-link"><i class="undefined"></i>
  tool
</a></li><li class="dropdown-item"><!----> <a href="/categories/language/" class="nav-link"><i class="undefined"></i>
  language
</a></li><li class="dropdown-item"><!----> <a href="/categories/decentralization/" class="nav-link"><i class="undefined"></i>
  decentralization
</a></li><li class="dropdown-item"><!----> <a href="/categories/architecture/" class="nav-link"><i class="undefined"></i>
  architecture
</a></li><li class="dropdown-item"><!----> <a href="/categories/network/" class="nav-link"><i class="undefined"></i>
  network
</a></li><li class="dropdown-item"><!----> <a href="/categories/software engineering/" class="nav-link"><i class="undefined"></i>
  software engineering
</a></li><li class="dropdown-item"><!----> <a href="/categories/notes/" class="nav-link"><i class="undefined"></i>
  notes
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="https://github.com/sammyne" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    sammyne
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>79</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>43</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/dev/" class="nav-link"><i class="undefined"></i>
  dev
</a></li><li class="dropdown-item"><!----> <a href="/categories/crypto/" class="nav-link"><i class="undefined"></i>
  crypto
</a></li><li class="dropdown-item"><!----> <a href="/categories/programming/" class="nav-link"><i class="undefined"></i>
  programming
</a></li><li class="dropdown-item"><!----> <a href="/categories/tee/" class="nav-link"><i class="undefined"></i>
  tee
</a></li><li class="dropdown-item"><!----> <a href="/categories/os/" class="nav-link"><i class="undefined"></i>
  os
</a></li><li class="dropdown-item"><!----> <a href="/categories/engineering/" class="nav-link"><i class="undefined"></i>
  engineering
</a></li><li class="dropdown-item"><!----> <a href="/categories/tool/" class="nav-link"><i class="undefined"></i>
  tool
</a></li><li class="dropdown-item"><!----> <a href="/categories/language/" class="nav-link"><i class="undefined"></i>
  language
</a></li><li class="dropdown-item"><!----> <a href="/categories/decentralization/" class="nav-link"><i class="undefined"></i>
  decentralization
</a></li><li class="dropdown-item"><!----> <a href="/categories/architecture/" class="nav-link"><i class="undefined"></i>
  architecture
</a></li><li class="dropdown-item"><!----> <a href="/categories/network/" class="nav-link"><i class="undefined"></i>
  network
</a></li><li class="dropdown-item"><!----> <a href="/categories/software engineering/" class="nav-link"><i class="undefined"></i>
  software engineering
</a></li><li class="dropdown-item"><!----> <a href="/categories/notes/" class="nav-link"><i class="undefined"></i>
  notes
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="https://github.com/sammyne" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>[ZKP] 03. 寻找知识</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>sammyne</span>
            
          <span data-v-4e82dffc>2020 - </span>
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">[ZKP] 03. 寻找知识</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>sammyne</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2/14/2021</span></i> <i class="iconfont reco-eye" data-v-1ff7123e><span id="/zkp/03-pok/" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-1ff7123e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>ZKP</span><span class="tag-item" data-v-1ff7123e>schnorr</span></i></div></div> <div class="theme-reco-content content__default"><blockquote><p>原文链接：<a href="https://github.com/sec-bit/learning-zkp/blob/master/zkp-intro/3/zkp-pok.md" target="_blank" rel="noopener noreferrer">寻找知识<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <blockquote><p><a href="/tag/ZKP/">本系列文章</a> 以非专业的视角介绍零知识相关知识。</p></blockquote> <blockquote><p>And what, Socrates, is the food of the soul? Surely, I said, knowledge is the food of the soul. 苏格拉底，什么是灵魂的食物？我说过，当然是知识。
—— 柏拉图</p></blockquote> <h2 id="零知识-vs-可靠性"><a href="#零知识-vs-可靠性" class="header-anchor">#</a> 零知识 vs. 可靠性</h2> <p>许多介绍零知识证明的文章都会提到以下三个性质：</p> <ul><li>Completeness -- 完备性</li> <li>Soundness -- 可靠性</li> <li>Zero-Knowledge -- 零知识</li></ul> <p>但是少有文章深入解释这个特性背后的深意和洞见。</p> <p><a href="/2021/02/14/zkp-02-simulation/">理解模拟</a> 一文介绍了<strong>模拟器</strong>这个概念。许多介绍文章也避而不谈<strong>模拟</strong>，但<strong>模拟</strong>可以说是安全协议中核心的核心，因为它是定义<strong>安全性</strong>的重要武器。</p> <p>通常，我们定义安全会采用这样一种方式--首先列出一些安全事件，然后说明如果一个系统安全，那么列出来的安全事件都不会发生。</p> <blockquote><p>Rather than giving a list of the events that are <em>not allowed</em> to occur, it (the definition of zero-knowledge proof) gives a maximalist <em>simulation</em> condition.</p> <p>— Boaz Barak</p></blockquote> <p>借用密码学家 Boaz Barak 的话，翻译一下，<strong>零知识证明</strong>并不是通过给出一个<strong>不允许发生的事件列表</strong>来定义，而是直接给出一个最极致的<strong>模拟条件</strong>。</p> <p>所谓<strong>模拟条件</strong>是指，通过<strong>模拟</strong>方法来实现一个<strong>理想世界</strong>，使之与<strong>现实世界</strong>不可区分。而由于理想世界不存在知识，所以可推导出结论：现实世界满足<strong>零知识</strong>。</p> <p>我们继续分析下一个交互系统（安全协议）的三个性质：<strong>完备性</strong>、<strong>可靠性</strong>与<strong>零知识</strong>。</p> <div class="custom-block tip"><p class="title"></p><p>可靠性（Soundness）：Alice 在没有知识的情况下不能通过 Bob 的验证。<br>
完备性（Completeness）：Alice 在有知识的情况下可以通过 Bob 的验证。<br>
零知识（Zero-knowledge）：Alice 在交互的过程中不会泄露关于知识的任何信息。</p></div><p>可以看到<strong>可靠性</strong>和<strong>完备性</strong>具有<strong>对称性</strong>--可靠性保证了恶意的 Alice 一定失败，而完备性保证了诚实的 Alice 一定成功。</p> <p><strong>完备性</strong>比较容易证明。只要 Alice 诚实，Bob 也诚实，那么皆大欢喜。这好比，写好一段代码，喂了一个测试用例，跑完通过收工。</p> <p><strong>可靠性</strong>应该如何定义？这个可靠性的逆否命题是：（在现实世界中）如果 Alice 能通过 Bob 的验证，那么 Alice 一定有知识。或者说：Alice 知道那个<strong>秘密</strong>！</p> <p>下面的问题是如何证明 Alice 知道一个<strong>秘密</strong>？</p> <p>这好像也很难。假如我们需要证明机器知道一个<strong>秘密</strong>，最简单的办法就是在机器的硬盘或者内存找到这个<strong>秘密</strong>，但是这样暴露了秘密。如果这台机器是黑盒子呢？或者是 Alice 呢？我们没有读心术，猜不到她心里的那个秘密。</p> <p>如何定义<strong>To Know</strong>？</p> <p><strong>零知识</strong>保证了验证者 Bob 没有（计算）能力来把和<strong>知识</strong>有关的信息<strong>抽取</strong>出来。不能抽取的<strong>知识</strong>不代表不存在。<strong>可靠性</strong>保证了知识的<strong>存在性</strong>。</p> <div class="custom-block tip"><p class="title"></p><p>只有在存在<strong>知识</strong>的前提下，保证<strong>零知识</strong>才有意义</p></div><p>本文将探讨<strong>可靠性</strong>和<strong>To Know</strong>。</p> <p>为了进一步分析<strong>知识</strong>，接下来首先介绍一个非常简洁，用途广泛的零知识证明系统 -- Schnorr 协议。这个协议代表了一大类的安全协议--所谓的 Σ-协议。而且 Schnorr 协议扩展也是 <a href="https://github.com/sec-bit/zkPoD-node" target="_blank" rel="noopener noreferrer">零知识数据交换协议 zkPoD<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的核心技术之一。</p> <h1 id="简洁的-schnorr-协议"><a href="#简洁的-schnorr-协议" class="header-anchor">#</a> 简洁的 Schnorr 协议</h1> <p>Alice 拥有一个秘密数字 <code>a</code>，可以把这个数字想象成<strong>私钥</strong>，可<strong>映射</strong>到椭圆曲线群上的一个点 <code>a*G</code>。这个点当做<strong>公钥</strong>。</p> <p>请注意<strong>映射</strong>这个词。这里先简要介绍<strong>同态</strong>这个概念。椭圆曲线群有限域之间存在着一种同态映射关系。有限域用 <code>Zq</code>这个符号表示，其中素数 <code>q</code> 指有限域的大小，是从 <code>0, 1, 2, ..., q-1</code> 这样一个整数集合。在一条椭圆曲线上，通过一个基点 <code>G</code>，可以产生一个<strong>循环群</strong>，标记为 <code>0G, G, 2G, ..., (q-1)*G</code>，正好是数量为 <code>q</code> 个曲线点的集合。任意两个曲线点可以进行一种<strong>特殊的二元运算</strong>，<code>G + G = 2G</code>，<code>2G + 3G = 5G</code>，看起来这个二元运算和<strong>加法</strong>类似，满足交换律和结合律。于是我们就用 <code>+</code> 这个符号来表示。这个群称为循环群是因为把群的最后一个元素 <code>(q-1)*G</code>，再加上一个 <code>G</code> 就回卷到群的第一个元素 <code>0G</code>。</p> <p>给定任意一个有限域上的整数 <code>r</code>，可以在循环群找到一个对应的点 <code>r*G</code>。但是通过 <code>r*G</code> 反过来计算 <code>r</code> 是很<strong>困难</strong>的，被称为<strong>离散对数难题</strong> [2]。</p> <p>也就是说，如果任意给一个椭圆曲线循环群上的点 <code>R</code>，计算出有限域的哪一个整数对应 <code>R</code> 是很难的。如果有限域足够大，比如说 256 比特，姑且可以认为这个反向计算是不可能做到的。</p> <p>Schnorr 协议充分利用了有限域和循环群之间单向映射，实现了最简单的零知识证明安全协议：Alice 向 Bob 证明她拥有 <code>PK</code> 对应的私钥 <code>sk</code>。</p> <p><img src="/assets/img/schnorr.21738c7f.png" alt=""></p> <ol><li>为了保证零知识，Alice 需要先产生一个随机数 <code>r</code>，这个随机数的用途是用来保护私钥无法被 Bob 抽取出来。这个随机数也需要映射到椭圆曲线群上，<code>r*G</code>。</li> <li>Bob 要提供一个随机数 <code>c</code> 进行挑战。</li> <li>Alice 根据挑战数计算 <code>z = r + a * c</code>，同时把 <code>z</code>发给 Bob。Bob 通过下面的式子进行检验：<div class="language- line-numbers-mode"><pre class="language-text"><code>z*G ?= R + c*PK = rG + c*(aG)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <p>可以看到 Bob  在第 3 步<strong>同态地</strong>检验 <code>z</code> 的计算过程。如果这个式子成立，那么就能证明 Alice 确实有私钥 <code>a</code>。何解？</p> <p><code>z</code> 的计算和验证过程很有趣，有几个关键技巧：</p> <ol><li>首先 Bob 必须给出一个<strong>随机</strong>挑战数，然后 Bob 在椭圆曲线上同态地检查 <code>z</code> 。如果我们把挑战数 <code>c</code> 看成是一个未知数，那么 <code>r+a*c=z</code> 可以看成是一个一元一次方程，其中 <code>r</code> 与 <code>a</code> 是方程系数。请注意在 <code>c</code> 未知的前提下，如果 <code>r + a*x = r' + a'*x</code> 要成立，那么根据 Schwatz-Zippel 定理 [3]，极大概率上 <code>r=r'</code>，<code>a=a'</code> 都成立。也就是说，Alice 在 <code>c</code> 未知的前提下，想找到另一对不同的 <code>r'</code>,<code>a'</code> 来计算 <code>z</code> 骗过 Bob 是几乎不可能的。这个随机挑战数 <code>c</code> 限制了 <code>r</code> 和 <code>a</code>。虽然 Bob 随机选了一个数，但是由于 Alice 事先不知道，所以 Alice 不得不使用私钥 <code>a</code> 来计算 <code>z</code>。这里的关键：<code>c</code> 必须是个随机数。</li> <li>Bob 的验证在椭圆曲线群上完成。Bob 不知道 <code>r</code>，但是他知道 <code>r</code> 映射到曲线上的点 <code>R</code>。Bob 也不知道 <code>a</code>，但是他知道 <code>a</code> 映射到曲线群上的点 <code>PK</code>，即 <code>a*G</code>。通过同态映射与 Schwatz-Zippel 定理，Bob 可以校验 <code>z</code> 的计算过程是否正确，从而知道 Alice 确实是通过 <code>r</code> 和 <code>a</code> 计算得出的 <code>z</code>，但是又不暴露 <code>r</code> 与 <code>a</code> 的值。</li> <li>协议第 1 步产生的随机数 <code>r</code> 保证了 <code>a</code> 的保密性。任何一个秘密和一个符合<strong>一致性分布</strong>的随机数相加的和仍然符合<strong>一致性分布</strong>。</li></ol> <h2 id="证明零知识"><a href="#证明零知识" class="header-anchor">#</a> 证明零知识</h2> <p>我们这里看一下 Schnorr 协议如何证明一个弱一些的<strong>零知识</strong>性质——<strong>SHVZK</strong>：</p> <div class="custom-block warning"><p class="title"></p><p>这里我们证明的仅仅是 Special Honest Verifier Zero-Knowledge（SHVZK）。SHVZK 要求协议中的 Bob 必须按常理出牌，比如他必须按协议约定，在第 2 步时，去传送带上取一个新鲜的随机数，并且立即使用。通常意义上的<strong>零知识</strong>不会对 Bob 做任何要求，所以说这里是一个弱一些的性质。虽然目前 Schnorr 协议不能证明完全的<strong>零知识</strong>，但经过添加一些协议步骤，就可以达到完全零知识的目的。细节这里不展开，有兴趣的读者请参考文献 [4]。以后我们在讨论 Fiat-Shamir 变换时，还会再次讨论这个问题。</p></div><p>首先<strong>模拟器</strong>模拟一个<strong>理想世界</strong>--在理想世界模拟出一个 Zlice 和 Bob 对话。Zlice 没有 Schnorr 协议中的知识 <code>sk</code>，而 Bob 是有公钥 <code>PK</code>的。请大家看下图，Bob 需要在 Schnorr 协议的第 2 步出示一个随机数 <code>c</code>，这里有个额外的要求，就是 Bob 只能<strong>诚实地</strong>从一个外部<strong>随机数传送带</strong>拿一个随机数，每一个随机数都必须是事先抛 k 次<strong>硬币</strong>产生的一个 <code>2^k</code> 范围内的一次性分布随机数。Bob 不能采用任何其他方式产生随机数，这就是为何我们要求 Bob 是诚实的。</p> <p>下面演示 Zlice 如何骗过 Bob：</p> <p><img src="/assets/img/schnorr-sim-1.cd842be1.png" alt=""></p> <blockquote><p>序幕：请注意 Zlice 没有关于<code>sk</code>的知识，这时 Bob 的随机数传送带上已经预先放置了一些随机数。</p></blockquote> <p><img src="/assets/img/schnorr-sim-2.c6b7a3b0.png" alt=""></p> <ol><li>Zlice 产生一个一致性分布的随机数 <code>c</code>，并且利用一个新的<strong>超能力</strong>，用刚刚产生的随机数 <code>c</code> 替换掉 Bob 的随机数传送带上第一个随机数。这时候，Bob 无法察觉。</li></ol> <p><img src="/assets/img/schnorr-sim-3.c0981d67.png" alt=""></p> <ol start="2"><li>Zlice 再次产生一个随机数 <code>z</code>，然后计算 <code>R'=z*G - c*PK</code>，并将 <code>R'</code>发送给 Bob。</li></ol> <p><img src="/assets/img/schnorr-sim-4.5b5d7a74.png" alt=""></p> <ol start="3"><li>Bob 从随机数传送带上取得 <code>c</code>，并且将 <code>c</code> 发送给 Zlice。请注意这个<code>c</code> 正好就是第 1 步 Zlice 产生的 <code>c</code>。</li></ol> <p><img src="/assets/img/schnorr-sim-5.347e6ba2.png" alt=""></p> <ol start="4"><li>Zlice 将第三步产生的随机数 <code>z</code> 发送给 Bob，Bob 按照 Schnorr 协议的验证公式进行验证，大家可以检查下，这个公式完美成立。</li></ol> <p>再对比下<strong>现实世界</strong>的 Schnorr 协议，发现在两个世界中 Bob 都能通过验证。</p> <p><img src="/assets/img/schnorr.21738c7f.png" alt=""></p> <p>但区别是：</p> <ul><li><strong>理想世界中</strong>，Zlice 没有 <code>sk</code>；而在<strong>现实世界中</strong>，Alice 有 <code>sk</code></li> <li><strong>理想世界中</strong>，<code>z</code> 是一个随机数，没有涉及 <code>sk</code>；而在<strong>现实世界中</strong>，<code>z</code> 的计算过程里面包含 <code>sk</code></li> <li><strong>理想世界中</strong>，Zlice 使用超能力替换了 Bob 的随机数；而在<strong>现实世界中</strong>，Alice 看不到 Bob 的随机数传送带，也无法更改传送带上的数字</li></ul> <p>这里请大家思考下：Schnorr 协议中，Bob 在第 2 步发挑战数能不能和第一步对调顺序？也就是说 Bob 能不能先发挑战数，然后 Alice 再发送 <code>R = r*G</code>。</p> <p>（两分钟后 ......）</p> <p>答案是不能。</p> <p>如果 Alice 能提前知道随机数，那么（现实世界中的）Alice 就可以按照模拟器 Zlice 做法来欺骗 Bob。</p> <h2 id="再遇模拟器"><a href="#再遇模拟器" class="header-anchor">#</a> 再遇模拟器</h2> <p>其实，<strong>可靠性</strong>和<strong>零知识</strong>这两个性质在另一个维度上也是存在着一种对称性。可靠性保证恶意的 Alice 一定失败，零知识保证恶意的 Bob （窃取知识）一定不会成功。有趣地是，这种对称性将体现在模拟出来的<strong>理想世界</strong>中。</p> <p>我们分析下可靠性这个定义：Alice 没有知识 <strong>导致</strong> Bob 验证失败。它的逆否命题为：Bob 验证成功 <strong>导致</strong> Alice 一定有知识。</p> <p><strong>我们再次求助模拟器</strong>，让他在可以发挥超能力的<strong>理想世界</strong>中，去检验 Alice 的知识。</p> <p>再次，请大家设想在平行宇宙中，有两个世界：<strong>理想世界</strong>和<strong>现实世界</strong>。理想世界有趣的地方在于它是<strong>模拟器</strong>模拟出来的，同时模拟器可以在理想世界放入带有超能力的 NPC。这次把 Alice 的两个分身同时放入<strong>理想世界</strong>与<strong>现实世界</strong>。</p> <p>假设<strong>你</strong>扮演 Bob 的角色，想知道对话的 Alice 是否真的是<strong>可靠的</strong>。于是把你放入<strong>理想世界</strong>，借助一个具有超能力的 NPC，你可以把对面的 Alice 的知识<strong>抽取</strong>出来。</p> <p>什么鬼？我们不是刚刚证明过：协议是零知识的吗？零知识就意味着 Bob 抽取不出任何的<strong>知识</strong>碎片。这里敲黑板：<strong>零知识是对于现实世界而言的</strong>。我们现在正在讨论的是神奇的<strong>理想世界</strong>。</p> <p>重申一遍：在<strong>理想世界</strong>中，你可以借助一个有超能力的 NPC 来抽取 Alice 的知识，从而保证<strong>现实世界</strong>的 Alice 无法作弊。可以想象一下，一个作弊的 Alice，她肯定没有知识，没有知识也就不可能在<strong>理想世界</strong>让 NPC 抽取到任何东西。</p> <p>然而<strong>现实世界</strong>没有可借助的 NPC，当然也就看不到 Alice 的知识，也就不会和<strong>零知识</strong>性质冲突。因为两个世界发生的事件是<strong>不可区分</strong>的，我们可以得到这样的结论：在<strong>现实世界</strong>中，Alice 一定是存在知识的。</p> <p>整理一下思路：如何证明在一个交互会话中 Alice 不能作弊呢？我们需要为这个交互会话定义一个<strong>模拟算法</strong>，该算法可以模拟出一个<strong>理想世界</strong>，其中有一个特殊的角色叫做<strong>抽取器</strong>(Extractor)，也就是前面说的 NPC，它能够使用<strong>超能力</strong>来<strong>抽取</strong>Alice 的知识，但是让对方<strong>无所察觉</strong>。</p> <p>注意：超能力是必不可少的！这一点在 <a href="/2021/02/14/zkp-02-simulation/">理解模拟</a> 有解释：如果模拟器在没有超能力的情况下具备作弊能力，那相当于证明了协议<strong>不可靠</strong>（Unsoudness）。同样地，如果<strong>抽取器</strong>在没有超能力的情况下具备抽取信息能力，那相当于证明了协议<strong>不零知</strong>（Not-zero-knowledge）。</p> <p>最后一点，超能力是什么？这个要取决于具体交互系统的证明。接下来从刚刚讲过的 Schnorr 协议切入。</p> <h2 id="知识证明"><a href="#知识证明" class="header-anchor">#</a> 知识证明</h2> <p>我们来证明一下 Schnorr 协议的<strong>可靠性</strong>，看看这个超能力 NPC 如何在<strong>理想世界</strong>把 Alice 私钥抽取出来。而这个<strong>超能力</strong>，仍然是<strong>时间倒流</strong>。</p> <p><img src="/assets/img/schnorr-extractor-1.589b9c0e.png" alt="schnorr-extractor-1"></p> <ol><li>Alice 选择一个随机数 <code>r</code>，并且计算 <code>R=r*G</code>，并将 <code>R</code> 发给<strong>抽取器</strong></li></ol> <p><img src="/assets/img/schnorr-extractor-2.a07b902e.png" alt="schnorr-extractor-2"></p> <ol start="2"><li>抽取器也选择一个随机的挑战数 <code>c</code>，并且发给 Alice</li></ol> <p><img src="/assets/img/schnorr-extractor-3.896bc38c.png" alt="schnorr-extractor-3"></p> <ol start="3"><li>Alice 计算并且回应 <code>z</code>，然后抽取器检查 <code>z</code> 是否正确</li></ol> <p><img src="/assets/img/schnorr-extractor-4.fd5c5a84.png" alt="schnorr-extractor-4"></p> <ol start="4"><li>抽取器发现 <code>z</code> 没有问题之后，发动超能力，将时间倒回第 2 步之前</li></ol> <p><img src="/assets/img/schnorr-extractor-5.c861ebd4.png" alt="schnorr-extractor-5"></p> <ol start="5"><li>抽取器再次发送一个不同的随机挑战数 <code>c'</code> 给 Alice，这时 Alice 回到第 2 步，会有一种似曾相识的感觉，但是无法感知到时间倒回这个事实</li></ol> <p><img src="/assets/img/schnorr-extractor-6.aa3b3d05.png" alt="schnorr-extractor-6"></p> <ol start="6"><li>Alice 再次计算了 <code>z'</code>，然后发给抽取器检查</li></ol> <p><img src="/assets/img/schnorr-extractor-7.cb111b10.png" alt="schnorr-extractor-7"></p> <ol start="7"><li>这时候抽取器有了 <code>z</code> 和 <code>z'</code>，就可以直接推算出 Alice 所拥有的私钥 <code>a</code>，达成<strong>知识抽取</strong></li></ol> <p>到这里，<strong>可靠性</strong>就基本证明完了。大家是不是对可靠性和零知性的<strong>对称性</strong>有点感觉了？</p> <p>总结一下：<strong>抽取器</strong>在<strong>理想世界</strong>通过时间倒流的超能力，把 Alice 的<strong>知识</strong>完整地<strong>抽取</strong>出来，保证了一个没有知识的 Alice 是无法让抽取器达成目标，从而证明了<strong>可靠性</strong>。</p> <blockquote><p>注：并不是所有的可靠性都必须要求存在抽取器算法。采用抽取器来证明可靠性的证明系统被称为<strong>Proof of Knowledge</strong>。</p></blockquote> <h2 id="解读-ecdsa-签名攻击"><a href="#解读-ecdsa-签名攻击" class="header-anchor">#</a> 解读 ECDSA 签名攻击</h2> <p>在区块链系统中到处可见的 ECDSA 签名方案<strong>也是</strong>一个朴素的零知识证明系统。椭圆曲线数字签名方案 ECDSA 与 Schnorr 协议非常接近，基于 Schnorr 协议的签名方案发表在 1991年的《密码学杂志》[5] 上。1991年，正值美国国家标准局（NIST）选择数字签名算法，优雅的 Schnorr 签名方案居然被申请了专利，因此 NIST 提出了另一套签名方案 DSA（Digital Signature Algorithm）。随后这个方案支持了椭圆曲线，于是被称为 ECDSA。中本聪在构思比特币时，选择了 ECDSA 作为签名算法，但是曲线并没有选择 NIST 标准推荐的椭圆曲线 -- secp256-r1，而是 secp256-k1。因为江湖传言，NIST 可能在椭圆曲线参数选择上做了手脚，导致某些机构可以用不为人知的办法求解离散对数难题，从而在<strong>现实世界</strong>具备超能力。有不少人在怀疑，也许当年中本聪在设计比特币时，也有这种考虑，故意选择了 secp256-k1 这样一条貌似安全性稍弱的曲线。</p> <p>我们拆解下 ECDSA 签名，用交互的方式定义一个类似 ECDSA 的认证方案，交互见下图。</p> <p><img src="/assets/img/ecdsa.69e4cf48.png" alt="ecdsa-sig"></p> <ol><li>Alice 仍然是选择一个随机数 <code>k</code>，并将 <code>k</code> 映射到椭圆曲线上，得到点 <code>K</code> ，然后发送给 Bob</li> <li>Bob 需要产生两个随机数，<code>c</code> 和 <code>e</code>，然后交给 Alice</li> <li>Alice 计算 <code>s</code>，并且发送给 Bob，他来验证 <code>s</code> 的计算过程是否正确</li></ol> <div class="custom-block tip"><p class="title"></p><p>对熟悉 ECDSA 签名方案的读者，这里略作解释：Bob 产生的 <code>c</code> 对应被签消息的 Hash 值 <code>Hash(m)</code>，而 <code>e</code> 则是由一个转换函数 <code>F(K)</code>来产生。其中 <code>F(.)</code> 是取椭圆曲线点的 x 坐标经过 <code>(mod q)</code> 得到 [6]。</p></div><p>江湖上流传着一个说法：ECDSA 签名方案有个严重的安全隐患--如果在两次签名使用了同一个随机数，那么签名者的私钥将会暴露出来。其实 Schnorr 签名方案也有同样的问题。</p> <p>当年 Sony  PlayStation 3 的工程师在调用 ECDSA 库函数时，本来应该输入随机数的参数位置上，却传入了一个常数。熟悉密码学的黑客们发现了这个严重的后门。2011 年 1 月，神奇小子 Geohot 公开发布了 Sony PS3 的主私钥，这意味着任何用户都可以轻松拿到游戏机的 root 权限。Sony 随后大为光火....... （后续故事大家可以上网搜）</p> <p>如果 Alice 在两次交互过程中使用了同一个 <code>K</code>，那么 Bob 可以通过发送两个不同的 <code>c</code> 和 <code>c'</code> 来得到 <code>s</code> 和 <code>s'</code>，然后通过下面的公式算出私钥 <code>a</code>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>k = (c - c')/(s - s')
a = (k * s - c)/e
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>那么我们应该怎么看待这个<strong>安全后门</strong>呢？大家想想看，这个安全后门和前面证明过的 Schnorr 协议的可靠性证明几乎一模一样！这个算法正是 ECDSA 认证协议的<strong>可靠性</strong>证明中的<strong>抽取器</strong>算法。只不过在可靠性证明中，为了让 Alice 使用同一个随机数 <code>k</code> 来认证两次，<strong>抽取器</strong>需要利用<strong>时间倒流</strong>的超能力。</p> <p>但是在 Sony PS3 系统中，随机数被不明所以的工程师写成了一个固定不变的值，这样相当于直接赋予了黑客<strong>超能力</strong>，而这是在<strong>现实世界</strong>中。或者说，黑客在不需要<strong>时间倒流</strong>的情况下就能实现<strong>抽取器</strong>。</p> <p>提醒下，不仅仅是随机数不能重复的问题。而是随机数必须是具有密码学安全强度的随机数。</p> <p>设想下，如果随机数 <code>r</code> 是通过一个利用<strong>线性同余</strong>原理的伪随机数生成器产生，虽然 <code>r</code> 的值一直在变化，但是仍然不能阻止<strong>知识抽取</strong>。假设线性同余算法为 <code>r2= d*r1 + e (mod m)</code>，还回到 Schnorr 协议的第 3 步：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1: z1 = r1 + c1*a
2: z2 = r2 + c2*a
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果攻击者让 Alice 连续做两次签名，那么将 <code>r2</code> 代入  <code>r1</code> 之后，就出现了两个线性方程求解两个未知数 <code>(r1, a)</code> 的情况，<code>z1, z2, c1, c2, d, e</code> 对于攻击者是已知的，这个方程组只用初中数学知识就可以求解。</p> <p>请注意：这并不是 Schnorr 协议（或 ECDSA 协议）的<strong>设计缺陷</strong>。恰恰相反，这是 Schnorr 协议设计比较精巧的地方，它<strong>从原理上保证了协议的可靠性</strong>。类似技巧在密码学协议中频繁出现，达到一目了然的<strong>简洁</strong>。但是也不得不说，如果不清楚协议的内在机制，尤其是区分不清楚<strong>理想世界</strong>与<strong>现实世界</strong>，使用者很容易引入各种花式的<strong>安全漏洞</strong>。</p> <p>作为一个能写出可靠软件的靠谱码农，我们需要了解哪些？彻底理解安全协议的设计机制当然是最好的，但是绝大多数情况下是非常耗费精力的。一般来说，把各种密码学工具当做<strong>黑盒</strong>来用可能是不够的，我们最好还能了解下：</p> <ol><li><strong>安全定义</strong>是什么？</li> <li><strong>安全假设</strong>到底是什么？</li> <li><strong>理想世界</strong>的<strong>超能力</strong>到底是什么？</li></ol> <h2 id="脑洞-我们生活在模拟世界中吗"><a href="#脑洞-我们生活在模拟世界中吗" class="header-anchor">#</a> 脑洞：我们生活在模拟世界中吗</h2> <p>第一次读懂<strong>模拟器</strong>时，我第一时间想到的是电影《黑客帝国》。我们生活所在<strong>现实世界</strong>也许是某一个模拟器模拟出来的<strong>理想世界</strong>，看到、听到以及感知到的一切都是被<strong>模拟</strong>出来的。在<strong>现实世界</strong>里，我们活在一个母体中，然而并不能意识到这一点。</p> <p><img src="/assets/img/matrix.e893097e.jpg" alt=""></p> <p>早在春秋战国时期，庄子也在思考类似的问题：</p> <blockquote><p>昔者庄周梦为胡蝶，栩栩然胡蝶也，自喻适志与，不知周也。俄然觉，则蘧蘧然周也。不知周之梦为胡蝶与，胡蝶之梦为周与？周与胡蝶，则必有分矣。此之谓物化。——《庄子·齐物论》</p></blockquote> <p>通俗地解释下：庄子有一天睡着了，梦见自己变成了一只蝴蝶，翩翩起舞，醒来之后发现自己还是庄子。在梦中，蝴蝶并不知道自己是庄子。于是庄子沉思到底是他梦中变成了蝴蝶，还是蝴蝶梦中变成了庄子呢？如果梦境足够真实，......</p> <p><strong>缸中之脑</strong>是美国哲学家 Gilbert Harman 提出的这样一个想法：一个人的大脑可以被放入一个容器里面，然后插上电线，通过模拟各种电信号输入，使得大脑以为自己活在真实世界。</p> <p><img src="/assets/img/brain-in-a-vat.82ab5463.png" alt=""></p> <p>这个想法源自哲学家笛卡尔的《第一哲学沉思集》[7]，在书中他论证我们应该怀疑一切，需要逐一检验所有人类的知识--数学、几何以及感知到的世界。然而他发现除了<strong>我思故我在</strong>之外，所有的知识都可能不靠谱，因为我们的大脑很可能被一个具有<strong>超能力</strong>的恶魔所欺骗。</p> <p>2003 年牛津大学的哲学教授 Nick Bostrom 郑重其事地写了一篇论文《我们生活在计算机模拟世界中吗？》[8]。认为以下三个事实中，至少有一个成立：</p> <ol><li>人类文明彻底灭绝。</li> <li>人类文明已经到达可以完全模拟现实世界的科技水平，但是处于某种原因，没有一个人愿意去创造出一个新的模拟世界，充当上帝的角色。</li> <li>我们现在的人类文明就生活在一个模拟世界。</li></ol> <p>硅谷企业家 Elon Musk 在一次公开采访中，谈到<strong>我们生活在基础现实世界</strong>的概率只有<strong>十亿分之一</strong>。也就是说，他认为我们生活在一个电脑游戏（模拟世界）中，在模拟世界之外，有一个程序员，他开发并操纵了这个世界，我们每个人都是一个游戏角色（NPC）。</p> <p>在玩腻越狱 iPhone 和自动驾驶之后，神奇小子 Geohot 在今年三月份的<strong>西南偏南</strong>大会上做了一个题为<strong>Jailbreaking the Simulation</strong>的演讲 [9]。他认为：我们被生活在一个模拟世界，所谓的上帝就是外部世界里活蹦乱跳的码农们。他们编程创造了我们的<strong>现实世界</strong>，可能启动了不止一个世界副本。然而，他们可能也生活在一个外层<strong>模拟世界</strong>。</p> <p><img src="/assets/img/sxsw.65d15f7a.jpg" alt="Jailbreaking the Simulation"></p> <p>如果我们确实生活在模拟世界，或许我们可以在地球的某个地方找到一个后门——<strong>Simulation Trapdoor</strong>，从而获得<strong>模拟器</strong>的超能力，抽取出不可思议的<strong>秘密知识</strong>。</p> <p>如果我们的世界的确是被程序模拟出来的，这个程序也许会有 Bug。如果有 Bug 存在，说不定我们可以利用这个 Bug 进行越狱，跳出<strong>理想世界</strong>，到达外面一层的世界，与可爱的码农上帝聊一聊。</p> <p>这是在开玩笑吗？下面摘自自知乎的一个段子 [10]：</p> <ul><li>问题：<strong>如果世界是虚拟的，有哪些实例可以证明？</strong>。</li> <li>回答：</li></ul> <blockquote><ol><li>为什么宏观上丰富多彩，但是微观的基本粒子却都是一模一样的？这正和图片富多彩，但是像素是一模一样的一回事</li> <li>为什么光速有上限？因为机器的运行速度有限</li> <li>为什么会有普朗克常量？因为机器的数据精度有限</li> <li>为什么微观粒子都是几率云？这是为了避免系统陷入循环而增加的随机扰动</li> <li>为什么有泡利不相容原理？看来系统采用的数据组织是多维数组</li> <li>为什么量子计算机运行速度那么快，一瞬间可以尝试所有可能？因为这个本质上是调用了宿主机的接口</li> <li>为什么会有量子纠缠？这实际上是引用同一个对象的两个指针</li> <li>为什么会有观察者效应？这显然是lazy updating</li> <li>为什么时间有开端？系统有启动时间</li></ol></blockquote> <h2 id="未完待续"><a href="#未完待续" class="header-anchor">#</a> 未完待续</h2> <p>设计一个密码学协议就好像在走钢丝--如果想同时做到<strong>零知识</strong>和<strong>可靠性</strong>就意味着既要让协议内容充分随机，又要保证<strong>知识</strong>能够参与协议的交互。如果协议没有正确设计，亦或没有正确工程实现，系统安全性将会坍塌。比如可能破坏了零知性，导致<strong>知识</strong>在不经意间泄露；或者破坏了可靠性，导致任何人都能伪造证明。这种安全性远比传统的代码底层机制漏洞来得更加严重，并且更难被发现。严格数学论证似乎是必不可少的。</p> <p>我们的世界真的是某个<strong>三体文明</strong>模拟出来的吗？不能排除这个可能性，或许我们需要认真地重新审视自己的各种执念。不过那又怎么样呢？至少自己的<strong>思想</strong>是真实的。</p> <blockquote><p>If you would be a real seeker after truth, it is necessary that at least once in your life you doubt, as far as possible, all things.  如果你是一个真正的真理探求者，在你人生中至少要有一次，尽可能地质疑所有的事情。
-- 笛卡尔</p></blockquote> <p><em>致谢：特别感谢 Shengchao Ding, Jie Zhang，Yu Chen 以及安比实验室小伙伴们(p0n1, even, aphasiayc, Vawheter, yghu, mr)的建议和指正。</em></p> <h3 id="参考文献"><a href="#参考文献" class="header-anchor">#</a> 参考文献</h3> <ul><li>[2] Hoffstein, Jeffrey, Jill Pipher, Joseph H. Silverman, and Joseph H. Silverman. An introduction to mathematical cryptography. Vol. 1. New York: springer, 2008.</li> <li>[3] Schwartz–Zippel Lemma. Wikipedia.  https://en.wikipedia.org/wiki/Schwartz%E2%80%93Zippel_lemma</li> <li>[4] Damgård, Ivan. &quot;On Σ-protocols.&quot; <em>Lecture Notes, University of Aarhus, Department for Computer Science</em> (2002).</li> <li>[5] Schnorr, Claus-Peter. &quot;Efficient signature generation by smart cards.&quot; <em>Journal of cryptology</em> 4.3 (1991): 161-174.</li> <li>[6] Brown, Daniel RL. &quot;Generic groups, collision resistance, and ECDSA.&quot; <em>Designs, Codes and Cryptography</em> 35.1 (2005): 119-152.</li> <li>[7] 笛卡儿, 徐陶. 第一哲学沉思集. 九州出版社; 2008.</li> <li>[8] Bostrom, Nick. &quot;Are we living in a computer simulation?.&quot; The Philosophical Quarterly 53.211 (2003): 243-255.</li> <li>[9] Nick Statt. &quot;Comma.ai founder George Hotz wants to free humanity from the AI simulation&quot;. Mar 9, 2019. https://www.theverge.com/2019/3/9/18258030/george-hotz-ai-simulation-jailbreaking-reality-sxsw-2019</li> <li>[10] doing@知乎. &quot;如果世界是虚拟的，有哪些实例可以证明？&quot;. 2017. https://www.zhihu.com/question/34642204/answer/156671701</li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/18/2021, 2:34:59 AM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/zkp/03-pok/#零知识-vs-可靠性" class="sidebar-link reco-side-零知识-vs-可靠性" data-v-70334359>零知识 vs. 可靠性</a></li><li class="level-2" data-v-70334359><a href="/zkp/03-pok/#证明零知识" class="sidebar-link reco-side-证明零知识" data-v-70334359>证明零知识</a></li><li class="level-2" data-v-70334359><a href="/zkp/03-pok/#再遇模拟器" class="sidebar-link reco-side-再遇模拟器" data-v-70334359>再遇模拟器</a></li><li class="level-2" data-v-70334359><a href="/zkp/03-pok/#知识证明" class="sidebar-link reco-side-知识证明" data-v-70334359>知识证明</a></li><li class="level-2" data-v-70334359><a href="/zkp/03-pok/#解读-ecdsa-签名攻击" class="sidebar-link reco-side-解读-ecdsa-签名攻击" data-v-70334359>解读 ECDSA 签名攻击</a></li><li class="level-2" data-v-70334359><a href="/zkp/03-pok/#脑洞-我们生活在模拟世界中吗" class="sidebar-link reco-side-脑洞-我们生活在模拟世界中吗" data-v-70334359>脑洞：我们生活在模拟世界中吗</a></li><li class="level-2" data-v-70334359><a href="/zkp/03-pok/#未完待续" class="sidebar-link reco-side-未完待续" data-v-70334359>未完待续</a></li><li class="level-3" data-v-70334359><a href="/zkp/03-pok/#参考文献" class="sidebar-link reco-side-参考文献" data-v-70334359>参考文献</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.6731dc6d.js" defer></script><script src="/assets/js/3.3f52b992.js" defer></script><script src="/assets/js/1.86295094.js" defer></script><script src="/assets/js/6.905f5193.js" defer></script>
  </body>
</html>
