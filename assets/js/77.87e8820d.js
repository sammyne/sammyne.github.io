(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{743:function(t,e,r){"use strict";r.r(e);var a=r(2),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("optee 的源代码可以从 "),e("a",{attrs:{href:"https://github.com/OP-TEE/optee_os/tree/3.12.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("github"),e("OutboundLink")],1),t._v(" 获取。在 Linux 使用 repo 的方式可以获取到完整的 optee 源代码如下：")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本教程是用的是 3.12.0 版本的 optee，运行环境为 QEMU 虚拟的 ARMv8 架构。")]),t._v("\nrepo init "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.12")]),t._v(".0 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-u")]),t._v(" https://github.com/OP-TEE/manifest.git "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" qemu_v8.xml\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("blockquote",[e("p",[t._v("注意：拉取过程很多东西都需要翻墙，建议为 github 和 repo 设置代理。github 代理教程参见 "),e("a",{attrs:{href:"https://sammyne.github.io/_post/speedup-github/",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),e("OutboundLink")],1),t._v("，repo 代理设置参见这份 "),e("a",{attrs:{href:"https://github.com/sammyne/ghcr.io/blob/main/git-repo/2.12.2/ubuntu20.04/Dockerfile",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dockerfile"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("p",[t._v("下载完成后，可见项目结构如下")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(".\n|-- build\n|-- buildroot\n|-- edk2\n|-- linux\n|-- mbedtls\n|-- optee_benchmark\n|-- optee_client\n|-- optee_examples\n|-- optee_os\n|-- optee_test\n|-- qemu\n|-- soc_term\n`-- trusted-firmware-a\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br")])]),e("p",[t._v("各目录的作用介绍如下：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"right"}},[t._v("目录")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/OP-TEE/build/tree/3.12.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("build"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("这个工程的编译目录，里面包含了各种 Makefile 文件和相关配置文件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/buildroot/buildroot/tree/2020.08",target:"_blank",rel:"noopener noreferrer"}},[t._v("buildroot"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("TODO")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/tianocore/edk2/commit/dd4cae4d82c7477273f3da455084844db5cca0c0",target:"_blank",rel:"noopener noreferrer"}},[t._v("edk2"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("TODO")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/linaro-swg/linux/tree/optee-3.12.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("linux"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("linux 内核代码，其 driver/tee 子目录存放 TEE 对应的驱动程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/ARMmbed/mbedtls/tree/mbedtls-2.16.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("mbedtls"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("TODO")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/linaro-swg/optee_benchmark/tree/3.12.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("optee_benchmark"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("TODO")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/OP-TEE/optee_client/tree/3.12.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("optee_client"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("包含 CA 程序调用的用户空间层面的接口库源码，其 tee_supplicant 子目录的代码会被编译成一个二进制。该二进制主要的作用是：调用 CA 接口加载 TA image 时，TEE OS 通过该二进制从文件系统获取 TA image，并传递给 TEE OS，然后再将 TA image 放到 TEE OS 运行。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/linaro-swg/optee_examples/tree/3.12.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("optee_examples"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("示例代码")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/OP-TEE/optee_os/tree/3.12.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("optee_os"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("存放 OP-TEE OS 的源代码和相关文档")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/OP-TEE/optee_test/tree/3.12.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("optee_test"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("optee 的测试程序 xtest 的源码，主要用来测试 TEE 提供的各种算法逻辑和其他功能")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/qemu/qemu/tree/v5.1.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("qemu"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("QEMU 源代码")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/linaro-swg/soc_term",target:"_blank",rel:"noopener noreferrer"}},[t._v("soc_term"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在启动时与 gnome-terminal 命令一起启动终端，用于建立启动的两个终端之间的端口监听，方便 OP-TEE OS 的日志和linux 内核日志分别输出到两个终端")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[e("a",{attrs:{href:"https://github.com/sammyne/trusted-firmware-a/tree/v2.3",target:"_blank",rel:"noopener noreferrer"}},[t._v("trusted-firmware-a"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("TODO")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"right"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})])])]),t._v(" "),e("blockquote",[e("p",[t._v("@TODO：其他目录的功能后续弄懂再补充 😦")])]),t._v(" "),e("h2",{attrs:{id:"参考文献"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[t._v("#")]),t._v(" 参考文献")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://icyshuai.blog.csdn.net/article/details/71499945",target:"_blank",rel:"noopener noreferrer"}},[t._v("OP-TEE代码结构"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=n.exports}}]);