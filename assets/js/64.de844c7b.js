(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{757:function(s,t,a){"use strict";a.r(t);var r=a(6),n=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),a("p",[s._v("由于 rustup 官方服务器在国外，直接按照 "),a("a",{attrs:{href:"https://www.rust-lang.org/tools/install",target:"_blank",rel:"noopener noreferrer"}},[s._v("rust 官网的指南"),a("OutboundLink")],1),s._v(" 安装非常容易失败，即使不失败也慢成狗，换用用国内的镜像则可以分分钟搞定。")]),s._v(" "),a("h2",{attrs:{id:"官方安装方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#官方安装方法"}},[s._v("#")]),s._v(" 官方安装方法")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("相关文档： "),a("a",{attrs:{href:"https://www.rust-lang.org/tools/install",target:"_blank",rel:"noopener noreferrer"}},[s._v("rust 安装指南"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[s._v("命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" --proto "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'=https'")]),s._v(" --tlsv1.2 -sSf https://sh.rustup.rs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"使用国内镜像加速安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用国内镜像加速安装"}},[s._v("#")]),s._v(" 使用国内镜像加速安装")]),s._v(" "),a("h3",{attrs:{id:"原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),a("p",[s._v("官方的 "),a("a",{attrs:{href:"https://sh.rustup.rs",target:"_blank",rel:"noopener noreferrer"}},[s._v("rustup-init.sh"),a("OutboundLink")],1),s._v(" 脚本支持配置以下两个变量")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("RUSTUP_UPDATE_ROOT")]),s._v("：脚本的默认值为 https://static.rust-lang.org/rustup，指定 rust-init 的下载地址，覆写外部同名的环境变量可替换这个值。目前国内可用地址有\n"),a("ul",[a("li",[s._v("https://mirrors.ustc.edu.cn/rust-static/rustup")])])]),s._v(" "),a("li",[a("code",[s._v("RUSTUP_DIST_SERVER")]),s._v("：默认值为 https://static.rust-lang.org，指定 rust 配套组件的下载地址，覆写同名的环境变量可替换这个值。目前国内可用地址有\n"),a("ul",[a("li",[s._v("https://mirrors.sjtug.sjtu.edu.cn/rust-static/")]),s._v(" "),a("li",[s._v("https://mirrors.tuna.tsinghua.edu.cn/rustup")]),s._v(" "),a("li",[s._v("https://mirrors.ustc.edu.cn/rust-static")])])])]),s._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("p",[s._v("以清华源为例")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以把以下两行添加到 ~/.bashrc 等文件，使之成为全局环境变量，这样后续所有 rustup 或 cargo 命令均会使用此环境变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RUSTUP_UPDATE_ROOT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://mirrors.ustc.edu.cn/rust-static/rustup\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RUSTUP_DIST_SERVER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://mirrors.tuna.tsinghua.edu.cn/rustup\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" --proto "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'=https'")]),s._v(" --tlsv1.2 -sSf https://sh.rustup.rs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("温馨提示i")]),a("p",[s._v("适用于未把 "),a("code",[s._v("RUSTUP_UPDATE_ROOT")]),s._v(" 和 "),a("code",[s._v("RUSTUP_DIST_SERVER")]),s._v(" 添加到 ~/.bashrc 的场景"),a("br"),s._v("\nrust 安装后，会创建文件 "),a("code",[s._v("$HOME/.cargo/env")]),s._v("，支持通过此文件配置其包管理工具 cargo。为了以后都从国内镜像源下载包，可以将上面的环境变量加入到\n"),a("code",[s._v("$HOME/.cargo/env")]),s._v(" 文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RUSTUP_DIST_SERVER=https://mirrors.tuna.tsinghua.edu.cn/rustup"')]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~./ .cargo/env\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),a("h2",{attrs:{id:"使用国内镜像加速更新-crate-拉取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用国内镜像加速更新-crate-拉取"}},[s._v("#")]),s._v(" 使用国内镜像加速更新 crate 拉取")]),s._v(" "),a("h3",{attrs:{id:"替换-crates-io-源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#替换-crates-io-源"}},[s._v("#")]),s._v(" 替换 "),a("code",[s._v("crates.io")]),s._v(" 源")]),s._v(" "),a("p",[s._v("更新 "),a("code",[s._v("~/.cargo/config")]),s._v(" 更新如下")]),s._v(" "),a("div",{staticClass:"language-toml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("source.crates-io")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("registry")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/rust-lang/crates.io-index"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 替换成你偏好的镜像源")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("replace-with")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sjtu'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#replace-with = 'ustc'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清华大学")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("source.tuna")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("registry")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 中国科学技术大学")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("source.ustc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("registry")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git://mirrors.ustc.edu.cn/crates.io-index"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上海交通大学")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("source.sjtu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("registry")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://mirrors.sjtug.sjtu.edu.cn/git/crates.io-index"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rustcc社区")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("source.rustcc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("registry")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git://crates.rustcc.cn/crates.io-index"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("blockquote",[a("p",[s._v("添加 Github 镜像加速器也能达到类似效果，参见 "),a("RouterLink",{attrs:{to:"/2020/12/22/speedup-github/"}},[s._v("国内基于 Github 镜像加速器加快 github.com 的仓库拉取")]),s._v("。")],1)]),s._v(" "),a("h3",{attrs:{id:"替换-github-com-源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#替换-github-com-源"}},[s._v("#")]),s._v(" 替换 github.com 源")]),s._v(" "),a("p",[s._v("借助 git 全局替换 "),a("code",[s._v("github.com")]),s._v(" 为 "),a("a",{attrs:{href:"https://doc.fastgit.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("fastgit.org"),a("OutboundLink")],1),s._v(" 等代理服务，或直接修改 "),a("code",[s._v("Cargo.toml")]),s._v(" 的引用源 url 中的 "),a("code",[s._v("github.com")]),s._v(" 为 "),a("a",{attrs:{href:"https://doc.fastgit.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("fastgit.org"),a("OutboundLink")],1),s._v(" 等代理服务的地址，具体参见 "),a("RouterLink",{attrs:{to:"/2020/12/22/speedup-github/"}},[s._v("国内基于 Github 镜像加速器加快 github.com 的仓库拉取")]),s._v("。")],1),s._v(" "),a("h2",{attrs:{id:"参考文献"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[s._v("#")]),s._v(" 参考文献")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.rust-lang.org/tools/install",target:"_blank",rel:"noopener noreferrer"}},[s._v("rust 安装指南"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://mirrors.tuna.tsinghua.edu.cn/help/rustup/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Rustup 镜像安装帮助"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);