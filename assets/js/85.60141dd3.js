(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{754:function(s,t,a){"use strict";a.r(t);var r=a(2),e=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),t("p",[s._v("由于 rustup 官方服务器在国外，直接按照 "),t("a",{attrs:{href:"https://www.rust-lang.org/tools/install",target:"_blank",rel:"noopener noreferrer"}},[s._v("rust 官网的指南"),t("OutboundLink")],1),s._v(" 安装非常容易失败，即使不失败也慢成狗，换用用国内的镜像则可以分分钟搞定。")]),s._v(" "),t("h2",{attrs:{id:"官方安装方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官方安装方法"}},[s._v("#")]),s._v(" 官方安装方法")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("相关文档： "),t("a",{attrs:{href:"https://www.rust-lang.org/tools/install",target:"_blank",rel:"noopener noreferrer"}},[s._v("rust 安装指南"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[s._v("命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--proto")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'=https'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tlsv1.2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sSf")]),s._v(" https://sh.rustup.rs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"使用国内镜像加速安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用国内镜像加速安装"}},[s._v("#")]),s._v(" 使用国内镜像加速安装")]),s._v(" "),t("h3",{attrs:{id:"原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),t("p",[s._v("官方的 "),t("a",{attrs:{href:"https://sh.rustup.rs",target:"_blank",rel:"noopener noreferrer"}},[s._v("rustup-init.sh"),t("OutboundLink")],1),s._v(" 脚本支持配置以下两个变量")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("RUSTUP_UPDATE_ROOT")]),s._v("：脚本的默认值为 https://static.rust-lang.org/rustup，指定 rust-init 的下载地址，覆写外部同名的环境变量可替换这个值。目前国内可用地址有\n"),t("ul",[t("li",[s._v("https://mirrors.ustc.edu.cn/rust-static/rustup")])])]),s._v(" "),t("li",[t("code",[s._v("RUSTUP_DIST_SERVER")]),s._v("：默认值为 https://static.rust-lang.org，指定 rust 配套组件的下载地址，覆写同名的环境变量可替换这个值。目前国内可用地址有\n"),t("ul",[t("li",[s._v("https://mirrors.sjtug.sjtu.edu.cn/rust-static/")]),s._v(" "),t("li",[s._v("https://mirrors.tuna.tsinghua.edu.cn/rustup")]),s._v(" "),t("li",[s._v("https://mirrors.ustc.edu.cn/rust-static")])])])]),s._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("以清华源为例")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以把以下两行添加到 ~/.bashrc 等文件，使之成为全局环境变量，这样后续所有 rustup 或 cargo 命令均会使用此环境变量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RUSTUP_UPDATE_ROOT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://mirrors.ustc.edu.cn/rust-static/rustup\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RUSTUP_DIST_SERVER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://mirrors.tuna.tsinghua.edu.cn/rustup\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--proto")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'=https'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tlsv1.2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sSf")]),s._v(" https://sh.rustup.rs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"},[s._v("温馨提示i")]),t("p",[s._v("适用于未把 "),t("code",[s._v("RUSTUP_UPDATE_ROOT")]),s._v(" 和 "),t("code",[s._v("RUSTUP_DIST_SERVER")]),s._v(" 添加到 ~/.bashrc 的场景"),t("br"),s._v("\nrust 安装后，会创建文件 "),t("code",[s._v("$HOME/.cargo/env")]),s._v("，支持通过此文件配置其包管理工具 cargo。为了以后都从国内镜像源下载包，可以将上面的环境变量加入到\n"),t("code",[s._v("$HOME/.cargo/env")]),s._v(" 文件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RUSTUP_DIST_SERVER=https://mirrors.tuna.tsinghua.edu.cn/rustup"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~./ .cargo/env\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),t("h2",{attrs:{id:"使用国内镜像加速更新-crate-拉取"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用国内镜像加速更新-crate-拉取"}},[s._v("#")]),s._v(" 使用国内镜像加速更新 crate 拉取")]),s._v(" "),t("h3",{attrs:{id:"替换-crates-io-源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#替换-crates-io-源"}},[s._v("#")]),s._v(" 替换 "),t("code",[s._v("crates.io")]),s._v(" 源")]),s._v(" "),t("p",[s._v("更新 "),t("code",[s._v("~/.cargo/config")]),s._v(" 更新如下")]),s._v(" "),t("div",{staticClass:"language-toml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-toml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("source.crates-io")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[s._v("registry")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/rust-lang/crates.io-index"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 替换成你偏好的镜像源")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[s._v("replace-with")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sjtu'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#replace-with = 'ustc'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清华大学")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("source.tuna")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[s._v("registry")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 中国科学技术大学")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("source.ustc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[s._v("registry")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git://mirrors.ustc.edu.cn/crates.io-index"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上海交通大学")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("source.sjtu")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[s._v("registry")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://mirrors.sjtug.sjtu.edu.cn/git/crates.io-index"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rustcc社区")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("source.rustcc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[s._v("registry")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git://crates.rustcc.cn/crates.io-index"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("blockquote",[t("p",[s._v("添加 Github 镜像加速器也能达到类似效果，参见 "),t("RouterLink",{attrs:{to:"/2020/12/22/speedup-github/"}},[s._v("国内基于 Github 镜像加速器加快 github.com 的仓库拉取")]),s._v("。")],1)]),s._v(" "),t("h3",{attrs:{id:"替换-github-com-源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#替换-github-com-源"}},[s._v("#")]),s._v(" 替换 github.com 源")]),s._v(" "),t("p",[s._v("借助 git 全局替换 "),t("code",[s._v("github.com")]),s._v(" 为 "),t("a",{attrs:{href:"https://doc.fastgit.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("fastgit.org"),t("OutboundLink")],1),s._v(" 等代理服务，或直接修改 "),t("code",[s._v("Cargo.toml")]),s._v(" 的引用源 url 中的 "),t("code",[s._v("github.com")]),s._v(" 为 "),t("a",{attrs:{href:"https://doc.fastgit.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("fastgit.org"),t("OutboundLink")],1),s._v(" 等代理服务的地址，具体参见 "),t("RouterLink",{attrs:{to:"/2020/12/22/speedup-github/"}},[s._v("国内基于 Github 镜像加速器加快 github.com 的仓库拉取")]),s._v("。")],1),s._v(" "),t("h2",{attrs:{id:"参考文献"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[s._v("#")]),s._v(" 参考文献")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.rust-lang.org/tools/install",target:"_blank",rel:"noopener noreferrer"}},[s._v("rust 安装指南"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://mirrors.tuna.tsinghua.edu.cn/help/rustup/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Rustup 镜像安装帮助"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);